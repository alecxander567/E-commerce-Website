{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}E-Commerce Website{% endblock %}</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="{% static 'style.css' %}">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <style>
        body {
            padding-bottom: 10px;
        }
         .table-wrapper {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-radius: 10px;
            overflow-x: auto; /* Enable horizontal scrolling */
            padding-bottom: 10px;
        }
        
        .table {
            width: 100%;
            table-layout: auto; /* Allow the table to adjust to its content */
        }
        
        .container {
            padding-left: 15px;
            padding-right: 15px;
        }
        
        /* The rest of your styles remain unchanged */
        .table thead {
            background-color: #007bff;
            color: white;
        }
        .table thead th {
            font-weight: bold;
            text-transform: uppercase;
        }
        .table tbody tr:hover {
            background-color: #f1f1f1;
        }
        .table-bordered td, .table-bordered th {
            border: 1px solid #ddd;
        }
        .container {
            padding-left: 15px;
            padding-right: 15px;
        }
        
        /* The Form container */
        #formContainer {
            width: 100%;
            max-width: 600px; /* Form will be at most 600px wide */
            left: 50%;
            transform: translateX(-50%);
            padding: 16px;
            border-radius: 8px;
            background-color: #f8f9fa;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 50%;
            translate: middle;
        }
        
        /* Media query for screens smaller than 768px */
        @media (max-width: 768px) {
            #formContainer {
                width: 90%; /* Takes up 90% of the screen width on small screens */
                padding: 12px;
            }
        
            #formContainer h2 {
                font-size: 1.5rem; /* Smaller title font size */
            }
        
            .form-control {
                font-size: 0.875rem; /* Smaller font size for input fields */
            }
        
            button[type="submit"] {
                font-size: 0.875rem; /* Adjust submit button font size */
            }
        }
        
        /* Media query for screens smaller than 480px */
        @media (max-width: 480px) {
            #formContainer {
                width: 95%; /* Takes up 95% of the screen width on very small screens */
            }
        
            #formContainer h2 {
                font-size: 1.2rem; /* Further reduce title font size */
            }
        
            .form-control {
                font-size: 0.8rem; /* Even smaller font size for input fields */
            }
        
            button[type="submit"] {
                font-size: 0.8rem; /* Further reduce the submit button font size */
            }
        }
        
        /* Button close for the form */
        .btn-close {
            background-color: transparent;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
        }
        
        /* Button styles */
        .btn {
            padding: 10px 16px;
            font-size: 1rem;
            border: none;
            cursor: pointer;
            border-radius: 5px;
        }
        
        /* Button hover effect */
        .btn:hover {
            opacity: 0.8;
        }
    </style>
</head>
<body>

<div class="collapse" id="navbarToggleExternalContent">
    <div class="bg-dark p-4">
        <span class="menu" id="name-of-store">E-Commerce Website</span>
        <br>
        <button style="padding: 10px; border: none; background: transparent; color: white; font-weight: 900;" id="showFormBtn"  onclick="showForm()">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-bag-plus-fill" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10.5 3.5a2.5 2.5 0 0 0-5 0V4h5zm1 0V4H15v10a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V4h3.5v-.5a3.5 3.5 0 1 1 7 0M8.5 8a.5.5 0 0 0-1 0v1.5H6a.5.5 0 0 0 0 1h1.5V12a.5.5 0 0 0 1 0v-1.5H10a.5.5 0 0 0 0-1H8.5z"/>
              </svg>Add products
        </button>
        <br>
        <button style="padding: 10px; border: none; background: transparent; color: white; font-weight: 900;"  
        onclick="window.location.href='/sales_chart/'">
            <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-bar-chart-fill" viewBox="0 0 20 20">
                <path d="M1 11a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1zm5-4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1z"/>
            </svg> Top Selling Products
        </button>
        </div>     
    </div>
</div>
<nav class="navbar navbar-dark bg-dark" style="padding: 20px;">
<div class="container-fluid">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
        â˜°
    </button>
    <div style="display: flex; justify-content: center; align-items: center; gap: 20px;">
    <div class="dropdown ms-auto">
        <button class="btn btn-outline-light dropdown-toggle" type="button" id="dropdownMenu2" data-bs-toggle="dropdown" aria-expanded="false">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-list" viewBox="0 0 16 16">
                <path fill-rule="evenodd" d="M2.5 12a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5m0-4a.5.5 0 0 1 .5-.5h10a.5.5 0 0 1 0 1H3a.5.5 0 0 1-.5-.5"/>
            </svg>
        </button>
        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenu2">
            <li>
                <form method="post" action="{% url 'user_logout' %}">
                    {% csrf_token %}
                    <button class="dropdown-item text-danger" type="submit">
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-door-open-fill" viewBox="0 0 20 20">
                        <path d="M1.5 15a.5.5 0 0 0 0 1h13a.5.5 0 0 0 0-1H13V2.5A1.5 1.5 0 0 0 11.5 1H11V.5a.5.5 0 0 0-.57-.495l-7 1A.5.5 0 0 0 3 1.5V15zM11 2h.5a.5.5 0 0 1 .5.5V15h-1zm-2.5 8c-.276 0-.5-.448-.5-1s.224-1 .5-1 .5.448.5 1-.224 1-.5 1"/>
                    </svg>Logout</button>
                </form>
            </li>
          </ul>
       </div>
    </div>
</nav>

<div class="container mt-5">
    <!-- Product Form (Initially Hidden) -->
    <div id="formContainer" class="position-fixed top-50 start-50 translate-middle p-4 border rounded bg-light shadow-lg" style="display: none;">
        <button class="btn-close position-absolute top-0 end-0 m-2" onclick="hideForm()"></button>
        <h2 class="text-center mb-3">Add Product</h2>
        <form id="productForm" action="{% url 'add_product' %}" method="POST">
            {% csrf_token %}
            <div class="mb-3">
                <input type="text" id="productName" name="name" class="form-control" placeholder="Product Name" required>
            </div>
            <div class="mb-3">
                <input type="number" id="productPrice" name="price" class="form-control" placeholder="Price" required>
            </div>
            <div class="mb-3">
                <input type="text" id="productCategory" name="category" class="form-control" placeholder="Category" required>
            </div>
            <div class="mb-3">
                <input type="number" id="productQuantity" name="quantity" class="form-control" placeholder="Quantity" required>
            </div>
            <button type="submit" class="btn btn-primary w-100">Add Product</button>
        </form>
    </div>
</div>

<div class="container" style="display: inline-flex;">
    <svg xmlns="http://www.w3.org/2000/svg" width="55" height="55" fill="currentColor" class="bi bi-shop" viewBox="0 0 20 20">
        <path d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.37 2.37 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0M1.5 8.5A.5.5 0 0 1 2 9v6h1v-5a1 1 0 0 1 1-1h3a1 1 0 0 1 1 1v5h6V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5M4 15h3v-5H4zm5-5a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1zm3 0h-2v3h2z"/>
      </svg><h1 style="font-weight: 900;"><span>Selller</span> Dashboard</h1>
</div>
<h1 style="margin-top: 20px; text-align: center; font-weight: 900;"><span>Product</span> List</h1>
<!-- Product Display Table -->
<div class="container mt-5">
    <input type="hidden" id="csrf_token" value="{{ csrf_token }}">
    <div class="table-wrapper">
        <table class="table table-bordered table-hover table-striped" style="height: auto;">
            <thead>
                <tr>
                    <th>Name</th>
                    <th>Category</th>
                    <th>Price</th>
                    <th>Quantity</th>
                    <th>Operations</th>
                </tr>
            </thead>
            <tbody id="productTableBody">
                <!-- Data will be inserted here dynamically -->
                
            </tbody>
        </table>
    </div>
</div>
          
<script>  
    function showForm() {
        document.getElementById("formContainer").style.display = "block";
    }

    // Function to hide the form
    function hideForm() {
        document.getElementById("formContainer").style.display = "none";
    }
</script>

    {% block scripts %}{% endblock %}
    <script src="{% static 'scripts/salesChart.js' %}"></script>
    <script src="{% static 'scripts/design.js' %}"></script>
    <script src="{% static 'scripts/getProd.js' %}"></script>
    <script src="{% static 'scripts/addingProd.js' %}"></script>
    <script src="{% static 'scripts/script.js' %}"></script>
    
</body>
</html>
